#> asset:villager/0020.minemikan/trade_info/2.trade_info

# まずデータを初期化します(これは消さないでね)
# data remove storage asset: villager

# まずアイテムを持たせる防具立てを召喚します
# summon armor_stand -2000.0 0.0 0.0 {Tags:["ItemHolder"]}

# 交易品となるアイテムを持たせます(Mainhand→buy、Offhand→buyB、Head→sell)
# item replace entity @e[tag=ItemHolder,limit=1] weapon.mainhand with diamond 5
# item replace entity @e[tag=ItemHolder,limit=1] weapon.offhand with emerald 64
# item replace entity @e[tag=ItemHolder,limit=1] armor.head with diamond_block 1
# /loot版も用意しておきますね
# /lootでやる場合、個数を別コマンドで設定してあげる必要があります
# loot replace entity @e[tag=ItemHolder,limit=1] weapon.mainhand loot <path>
# data modify entity @e[tag=ItemHolder,limit=1] HandItems[0].Count set value 1
# loot replace entity @e[tag=ItemHolder,limit=1] weapon.offhand loot <path>
# data modify entity @e[tag=ItemHolder,limit=1] HandItems[1].Count set value 1
# loot replace entity @e[tag=ItemHolder,limit=1] armor.head loot <path>
# data modify entity @e[tag=ItemHolder,limit=1] ArmorItems[0].Count set value 1

# 持たせたアイテムを元にstorage上の取引を追加します
# data modify storage _: _ set from entity @e[tag=ItemHolder,limit=1]
# data modify storage asset: villager.Offers.Recipes set value {buy:{},buyB:{},sell:{}}
# data modify storage asset: villager.Offers.Recipes[-1].buy set from storage _: _.HandItems[0]
# data modify storage asset: villager.Offers.Recipes[-1].buyB set from storage _: _.HandItems[1]
# data modify storage asset: villager.Offers.Recipes[-1].sell set from storage _: _.ArmorItems[0]
# data remove storage _: _
# 他にも入れたい上方(xpや使用上限など)があれば各自設定します
# data modify storage asset: villager.Offers.Recipes[-1] merge value {xp:0,MaxUses:2147483637}

# 交易品を持たせるところから繰り返します。オフハンドを消したりするのは忘れずに

# 取引情報を設定し終わったら防具立てを処理する
# kill @e[tag=ItemHolder,limit=1]

# nbtなどはsummon側で設定します。ということで終了

data modify storage asset: villager.Offers.Recipes set value [{maxUses: 2147483647, buyB: {id: "minecraft:chorus_flower", Count: 1b}, buy: {id: "minecraft:torch", Count: 64b}, sell: {id: "minecraft:end_rod", Count: 32b}, xp: 1, uses: 0, priceMultiplier: 0.0f, specialPrice: 0, demand: 0, rewardExp: 0b}, {maxUses: 2147483647, buyB: {id: "minecraft:air", Count: 65b}, buy: {id: "minecraft:flint", Count: 16b}, sell: {id: "minecraft:cod", Count: 1b}, xp: 1, uses: 0, priceMultiplier: 0.0f, specialPrice: 0, demand: 0, rewardExp: 0b}, {maxUses: 2147483647, buyB: {id: "minecraft:air", Count: 65b}, buy: {id: "minecraft:cobweb", Count: 64b}, sell: {id: "minecraft:clay_ball", Count: 4b}, xp: 1, uses: 0, priceMultiplier: 0.0f, specialPrice: 0, demand: 0, rewardExp: 0b}, {maxUses: 2147483647, buyB: {id: "minecraft:air", Count: 65b}, buy: {id: "minecraft:glass_bottle", Count: 3b}, sell: {id: "minecraft:bone", Count: 3b}, xp: 1, uses: 0, priceMultiplier: 0.0f, specialPrice: 0, demand: 0, rewardExp: 0b}, {maxUses: 2147483647, buyB: {id: "minecraft:air", Count: 65b}, buy: {id: "minecraft:bone", Count: 3b}, sell: {id: "minecraft:snow_block", Count: 4b}, xp: 1, uses: 0, priceMultiplier: 0.0f, specialPrice: 0, demand: 0, rewardExp: 0b}, {maxUses: 2147483647, buyB: {id: "minecraft:piston", Count: 1b}, buy: {id: "minecraft:snow_block", Count: 4b}, sell: {id: "minecraft:ice", Count: 4b}, xp: 1, uses: 0, priceMultiplier: 0.0f, specialPrice: 0, demand: 0, rewardExp: 0b}, {maxUses: 2147483647, buyB: {id: "minecraft:piston", Count: 1b}, buy: {id: "minecraft:ice", Count: 4b}, sell: {id: "minecraft:packed_ice", Count: 2b}, xp: 1, uses: 0, priceMultiplier: 0.0f, specialPrice: 0, demand: 0, rewardExp: 0b}, {maxUses: 2147483647, buyB: {id: "minecraft:sugar", Count: 4b}, buy: {id: "minecraft:wheat", Count: 8b}, sell: {id: "minecraft:cookie", Count: 4b}, xp: 1, uses: 0, priceMultiplier: 0.0f, specialPrice: 0, demand: 0, rewardExp: 0b}, {maxUses: 2147483647, buyB: {id: "minecraft:pumpkin", Count: 1b}, buy: {id: "minecraft:wheat", Count: 8b}, sell: {id: "minecraft:pumpkin_pie", Count: 2b}, xp: 1, uses: 0, priceMultiplier: 0.0f, specialPrice: 0, demand: 0, rewardExp: 0b}, {maxUses: 2147483647, buyB: {id: "minecraft:apple", Count: 1b}, buy: {id: "minecraft:wheat", Count: 8b}, sell: {id: "minecraft:cake", Count: 1b}, xp: 1, uses: 0, priceMultiplier: 0.0f, specialPrice: 0, demand: 0, rewardExp: 0b}, {maxUses: 2147483647, buyB: {id: "minecraft:blaze_rod", Count: 2b}, buy: {id: "minecraft:ender_eye", Count: 2b}, sell: {id: "minecraft:potion", Count: 1b, tag: {CustomPotionEffects: [{Duration: 1200, Id: 1b, Amplifier: 16b, ShowParticles: 1b}, {Duration: 200, Id: 9b, Amplifier: 0b, ShowParticles: 1b}, {Duration: 1200, Id: 16b, Amplifier: 1b, ShowParticles: 1b}, {Duration: 1200, Id: 22b, Amplifier: 1b, ShowParticles: 1b}], HideFlags: 32, Potion: "minecraft:water", display: {Lore: ['{"text":"§3氷土にて多大な功績を残した探検家が"}', '{"text":"§3先住民により教わった特殊なレシピを"}', '{"text":"§3使用して作った薬。"}', '{"text":"§3ハイになれる。"}'], Name: '{"text":"§r§6ヴァイキングの秘薬"}'}}}, xp: 1, uses: 0, priceMultiplier: 0.0f, specialPrice: 0, demand: 0, rewardExp: 0b}, {maxUses: 2147483647, buyB: {id: "minecraft:rabbit_hide", Count: 1b}, buy: {id: "minecraft:string", Count: 4b}, sell: {id: "minecraft:lead", Count: 2b}, xp: 1, uses: 0, priceMultiplier: 0.0f, specialPrice: 0, demand: 0, rewardExp: 0b}, {maxUses: 2147483647, buyB: {id: "minecraft:air", Count: 65b}, buy: {id: "minecraft:rotten_flesh", Count: 32b}, sell: {id: "minecraft:rabbit_hide", Count: 4b}, xp: 1, uses: 0, priceMultiplier: 0.0f, specialPrice: 0, demand: 0, rewardExp: 0b}, {maxUses: 2147483647, buyB: {id: "minecraft:air", Count: 65b}, buy: {id: "minecraft:gunpowder", Count: 2b}, sell: {id: "minecraft:rabbit_foot", Count: 1b}, xp: 1, uses: 0, priceMultiplier: 0.0f, specialPrice: 0, demand: 0, rewardExp: 0b}, {maxUses: 2147483647, buyB: {id: "minecraft:bowl", Count: 1b}, buy: {id: "minecraft:cooked_rabbit", Count: 1b}, sell: {id: "minecraft:rabbit_stew", Count: 1b}, xp: 1, uses: 0, priceMultiplier: 0.0f, specialPrice: 0, demand: 0, rewardExp: 0b}, {maxUses: 2147483647, buyB: {id: "minecraft:air", Count: 65b}, buy: {id: "minecraft:ice", Count: 4b}, sell: {id: "minecraft:shield", Count: 1b, tag: {RepairCost: -2147483648, HideFlags: 32, BlockEntityTag: {Patterns: [{Pattern: "gra", Color: 15}, {Pattern: "sku", Color: 7}, {Pattern: "bri", Color: 0}, {Pattern: "tts", Color: 0}, {Pattern: "gru", Color: 9}, {Pattern: "gra", Color: 0}], Base: 9, id: "minecraft:banner"}, display: {Lore: ['{"text":"§r簡単に復元できる素材でできた盾。"}', '{"text":"§r足元が濡れやすく注意が必要。"}'], Name: '{"text":"§b§l氷の盾"}'}, Enchantments: [{lvl: 1s, id: "minecraft:mending"}, {lvl: 5s, id: "minecraft:sharpness"}], Damage: 0, AttributeModifiers: [{Slot: "offhand", AttributeName: "generic.knockback_resistance", Operation: 0, UUID: [I; 0, 2, 0, 1], Amount: -0.2d, Name: "KB"}, {Slot: "mainhand", AttributeName: "generic.knockback_resistance", Operation: 0, UUID: [I; 0, 1, 0, 2], Amount: -0.2d, Name: "KB"}]}}, xp: 1, uses: 1, priceMultiplier: 0.0f, specialPrice: 0, demand: 0, rewardExp: 0b}, {maxUses: 2147483647, buyB: {id: "minecraft:arrow", Count: 32b}, buy: {id: "minecraft:packed_ice", Count: 1b}, sell: {id: "minecraft:tipped_arrow", Count: 32b, tag: {CustomPotionEffects: [{Duration: 0, Id: 25b, Amplifier: -128b, ShowParticles: 1b}, {Duration: 0, Id: 16b, Amplifier: -20b, ShowParticles: 1b}, {Duration: 60, Id: 20b, Amplifier: 3b, ShowParticles: 0b}, {Duration: 60, Id: 2b, Amplifier: 5b, ShowParticles: 0b}], HideFlags: 32, Potion: "minecraft:water", display: {Lore: ['{"text":"§7凍気で追加ﾀﾞﾒｰｼﾞを与え、束縛する。"}'], Name: '{"text":"§b§l氷塊の矢"}'}}}, xp: 1, uses: 1, priceMultiplier: 0.0f, specialPrice: 0, demand: 0, rewardExp: 0b}, {maxUses: 2147483647, buyB: {id: "minecraft:packed_ice", Count: 64b}, buy: {id: "minecraft:skeleton_skull", Count: 1b}, sell: {id: "minecraft:player_head", Count: 1b, tag: {SkullOwner: {Properties: {textures: [{Value: "eyJ0aW1lc3RhbXAiOjE0MTM1NTI2MTAwNTAsInByb2ZpbGVJZCI6ImExY2M4ZWIzOWE1OTRiN2U5OTcwZjU0ODI2MzJjMGJiIiwicHJvZmlsZU5hbWUiOiJFaWppdHN1IiwiaXNQdWJsaWMiOnRydWUsInRleHR1cmVzIjp7IlNLSU4iOnsidXJsIjoiaHR0cDovL3RleHR1cmVzLm1pbmVjcmFmdC5uZXQvdGV4dHVyZS81MjEzYmM0NWNjNDYxOTM3N2IxMDRmODJiNGJmZDgxMWZjYzY3MmYyOGEyNTZjNDJjYmUxZDI0MTY2ZTY1MCIsIm1ldGFkYXRhIjp7Im1vZGVsIjoic2xpbSJ9fX19", Signature: "oB+HLvH9jqb69jSBEBBRgTjPmkY6Un/GzH9N9Sy8yzC2qqoMEZnZeKJCrQNf/qGLh7ePGCzKyAnMICdaFl7QTwrZxJoPYJvOS+2iBrUs1MS8ltumV5Bd1icxZ6Q4rLrM/R9r3p3GqjKFFSO/Qetkq9lfUTA8lPK2Y0vwz1/Kwuj26ey7IB9FMBp2nM8M4fApRKKneR6gxo8KU3ubsSeKfM+f+Kz6td7tIZkz9Ls9iS2oobO8o04qF/RCZgCx3oPzqqLyPGOlhhLTd39rK+sJeBLv8abdKdcVdVwLgWAVkp9luEJz/KcR/GWuL/tuCMjVZcuoKPUws+x1KO4QbvzGTzbNZJDKK/RMYPm03c4p6yukwTSskVj+FfPRIF0v+1aWOILX01SQip7NoJqCwbq0gEwn2EB5ilkCyw6RiA+ht3tPYVBjSqXky4wP+b6iyW2FBDv/E4UjUm2Uc7vjxHmoEpny8/Dapy7dvLfqpSjlISAmXKnbdz5Lg7v473bTR5dD2vNUVlCVTr7heg3LfXih1jVoFSwd8+tosZV+HazwAZFWO+Xt24PdBZSt0WIK6uvQN1yVITKEP0LXQTd7+1nsLKrU90oYqiPQzoBa7j4GA/nWOYi9H2ebmrLhwbip803NFBEsChdNBnREZvxGMm5+D3o1d3SsGqhWVxrxPuReyXU="}]}, Id: [I; -1580429645, -1705424002, -1720650424, 640860347], Name: "Eijitsu"}, display: {Name: '{"text":"§6§lまいんみかん"}'}}}, xp: 1, uses: 1, priceMultiplier: 0.0f, specialPrice: 0, demand: 0, rewardExp: 0b}]